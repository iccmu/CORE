{% load static %}
{% load wagtailcore_tags %}
{% load cms_tags %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Investigaci√≥n, recuperaci√≥n del patrimonio, publicaciones"/>
    <title>{% block title %}ICCMU - Instituto Complutense de Ciencias Musicales{% endblock %}</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Slabo+27px" rel="stylesheet" type="text/css"/>
    
    <!-- CSS -->
    <link href="{% static 'madmusic/css/bootstrap.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'madmusic/css/main.css' %}" rel="stylesheet"/>
    <link href="{% static 'madmusic/css/custom.css' %}" rel="stylesheet"/>
    <link href="{% static 'madmusic/css/font-awesome.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'madmusic/css/wagtail-richtext.css' %}" rel="stylesheet"/>
    <link href="{% static 'madmusic/css/accordions.css' %}" rel="stylesheet"/>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="home wp-singular {% block body_class %}{% endblock %}">
    <div class="out" id="velado"></div>
    
    <style>
        /* Overlay oscuro sobre las im√°genes */
        #header .overlay_container .overlay {
            opacity: 0.4;
        }
        
        /* Im√°genes del carousel como fondo */
        #header #header_image_slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        #header #header_image_slider li {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }
        #header #header_image_slider li:first-child {
            z-index: 1;
        }
        #header #header_image_slider li:not(:first-child) {
            display: none;
        }
        
        /* Overlay oscuro */
        #header .overlay_container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }
        
        /* Texto sobre las im√°genes - DEBE estar encima */
        #header #header_text_slider {
            position: absolute !important;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10 !important;
        }
        #header #header_text_slider li {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #header #header_text_slider li .container {
            position: relative;
            height: 100%;
            padding-top: 160px;
        }
        #header #header_text_slider li .title {
            color: #ffffff !important;
            font-size: 60px !important;
            line-height: 65px !important;
            font-weight: 700 !important;
            max-width: 500px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9), 0 0 10px rgba(0,0,0,0.5);
        }
        #header #header_text_slider li .subtitle {
            color: #ffffff !important;
            font-size: 22px !important;
            line-height: 30px !important;
            font-weight: 700 !important;
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9), 0 0 10px rgba(0,0,0,0.5);
        }
        /* Mostrar solo el primer slide del texto por defecto */
        #header #header_text_slider li:not(:first-child) {
            display: none;
        }
        
        /* Asegurar que el contenido principal aparezca justo despu√©s del men√∫ */
        .site-main {
            margin-top: 0 !important;
            padding-top: 0 !important;
        }
        
        /* El header tiene altura fija */
        #header {
            margin-bottom: 0;
        }
        
        /* Eliminar m√°rgenes del contenido principal */
        #main {
            margin-top: 0 !important;
            padding-top: 0 !important;
        }
        
        /* Asegurar que section#tools no tenga padding superior */
        section#tools {
            padding-top: 20px !important;
            margin-top: 0 !important;
        }
        
        /* Eliminar cualquier espacio entre el header y el contenido */
        .site-main {
            margin-top: 0 !important;
            padding-top: 0 !important;
        }
        
        /* Sobrescribir el margin-top del CSS original */
        #main {
            margin-top: 0 !important;
            padding-top: 20px !important;
        }
        
        /* Asegurar que el contenido empiece justo despu√©s del men√∫ */
        body.home .site-main,
        body.home #main {
            margin-top: 0 !important;
        }
        
        /* Eliminar padding superior de section#tools si existe */
        section#tools {
            padding-top: 20px !important;
            margin-top: 0 !important;
        }
        
        /* Posicionar el men√∫ debajo del carousel */
        #header {
            position: relative;
            min-height: 490px; /* Altura m√≠nima del carousel + men√∫ */
            overflow: visible !important;
        }
        
        /* Contenedor para men√∫ + submen√∫ */
        #header .menu-section-wrapper {
            position: relative;
            width: 100%;
            z-index: 100;
        }
        
        /* Asegurar que el wrapper no interfiera con los eventos */
        .menu-section-wrapper {
            pointer-events: none;
        }
        
        .menu-section-wrapper > * {
            pointer-events: auto;
        }
        
        /* Carousel ocupa los primeros 430px */
        #header #header_image_slider {
            height: 430px;
        }
        
        #header .overlay_container {
            height: 430px;
        }
        
        #header #header_text_slider {
            height: 430px;
        }
        
        #header .principal_container {
            height: 430px;
        }
        
        /* Men√∫ debajo del carousel */
        #header .menu-principal-container {
            position: relative !important;
            width: 100%;
            z-index: 98 !important;
            margin-top: 0 !important;
            margin-bottom: 0 !important;
            background-color: #ffffff;
            border-bottom: none !important;
            overflow: visible !important;
            padding-bottom: 0 !important;
        }
        
        #header .menu-principal-container .container {
            max-width: 100% !important;
            padding-left: 10px !important;
            padding-right: 10px !important;
        }
        
        /* Submenu debajo del men√∫ principal - oculto por defecto */
        .submenu_menu_principal {
            position: relative !important;
            width: 100%;
            left: 0 !important;
            right: 0 !important;
            z-index: 150 !important;
            background-color: #c1272d !important;
            max-height: 0 !important;
            opacity: 0 !important;
            transition: max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease !important;
            padding: 0 !important;
            margin-top: 0 !important;
            overflow: hidden !important;
            pointer-events: auto !important;
            border-top: 1px solid #e0e0e0 !important;
        }
        
        /* Crear un "puente" invisible arriba del submen√∫ para facilitar navegaci√≥n */
        .submenu_menu_principal::before {
            content: "";
            position: absolute;
            top: -5px;
            left: 0;
            right: 0;
            height: 5px;
            background: transparent;
            pointer-events: auto;
            z-index: 151;
        }
        
        /* Ajustes para men√∫ principal - SIEMPRE EN UNA L√çNEA */
        #menu_principal {
            display: flex !important;
            flex-wrap: nowrap !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 0 !important;
            overflow: visible !important;
        }
        
        #menu_principal .menu-item {
            flex: 0 1 auto !important;
            white-space: nowrap !important;
            text-align: center !important;
            min-width: 0 !important;
        }
        
        #menu_principal .menu-item > a {
            padding: 18px 8px !important;
            font-size: 11.5px !important;
            display: block !important;
            letter-spacing: -0.3px !important;
        }
        
        /* Pantallas muy grandes pueden tener m√°s espacio */
        @media (min-width: 1600px) {
            #menu_principal .menu-item > a {
                padding: 18px 12px !important;
                font-size: 12.5px !important;
                letter-spacing: 0px !important;
            }
        }
        
        /* Pantallas medianas */
        @media (min-width: 1400px) and (max-width: 1599px) {
            #menu_principal .menu-item > a {
                padding: 18px 10px !important;
                font-size: 12px !important;
                letter-spacing: -0.2px !important;
            }
        }
        
        /* Pantallas peque√±as - a√∫n m√°s compacto */
        @media (max-width: 1399px) and (min-width: 1201px) {
            #menu_principal .menu-item > a {
                padding: 18px 6px !important;
                font-size: 10.5px !important;
                letter-spacing: -0.4px !important;
            }
        }
        
        @media (max-width: 1200px) {
            #menu_principal .menu-item > a {
                padding: 18px 4px !important;
                font-size: 10px !important;
                letter-spacing: -0.5px !important;
            }
        }
        
        @media (max-width: 992px) {
            #menu_principal .menu-item > a {
                padding: 18px 3px !important;
                font-size: 9px !important;
                letter-spacing: -0.5px !important;
            }
        }
        
        /* === ESTILOS PARA SUBMEN√ö EN BARRA ROJA === */
        
        /* Ocultar submen√∫s dentro del men√∫ principal */
        #menu_principal .sub-menu {
            display: none !important;
        }
        
        /* Mostrar barra roja con animaci√≥n slide down */
        .submenu_menu_principal.hover-active,
        .submenu_menu_principal.page-active {
            max-height: 200px !important;
            opacity: 1 !important;
            padding: 15px 0 !important;
            pointer-events: auto !important;
            box-shadow: 0px 2px 5px rgba(0,0,0,0.1) !important;
            z-index: 200 !important;
        }
        
        /* Asegurar que los enlaces del submen√∫ rojo sean clickeables */
        .submenu_menu_principal .menu-item a {
            pointer-events: auto !important;
            cursor: pointer !important;
            display: inline-block !important;
            position: relative !important;
            z-index: 201 !important;
        }
        
        /* Ocultar barra roja cuando no hay hover ni p√°gina activa */
        .submenu_menu_principal:not(.hover-active):not(.page-active) {
            max-height: 0 !important;
            opacity: 0 !important;
            padding: 0 !important;
            pointer-events: auto !important;
        }
        
        /* Ocultar el puente cuando el submen√∫ no est√° activo */
        .submenu_menu_principal:not(.hover-active):not(.page-active)::before {
            display: none;
        }
        
        /* Items del submen√∫ en barra roja */
        .submenu_menu_principal .menu {
            display: flex !important;
            flex-wrap: wrap !important;
            gap: 20px !important;
            margin: 0 !important;
            padding: 0 !important;
            list-style: none !important;
            justify-content: center !important;
        }
        
        .submenu_menu_principal .menu-item {
            margin: 0 !important;
            flex: 0 0 auto !important;
        }
        
        .submenu_menu_principal .menu-item a {
            color: #ffffff !important;
            text-decoration: none !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            font-size: 12px !important;
            letter-spacing: 0.5px !important;
            transition: opacity 0.2s ease !important;
            white-space: nowrap !important;
        }
        
        .submenu_menu_principal .menu-item a:hover {
            opacity: 0.8 !important;
        }
        
        .submenu_menu_principal .menu-item.active a {
            text-decoration: underline !important;
        }
        
        /* Responsive para barra roja */
        @media (max-width: 1200px) {
            .submenu_menu_principal .menu {
                gap: 15px !important;
            }
            .submenu_menu_principal .menu-item a {
                font-size: 11px !important;
            }
        }
        
        @media (max-width: 992px) {
            .submenu_menu_principal .menu {
                gap: 10px !important;
            }
            .submenu_menu_principal .menu-item a {
                font-size: 10px !important;
            }
        }
        
        /* Animaci√≥n de fade para el contenido del submen√∫ */
        #submenu_items {
            transition: opacity 0.2s ease-in-out !important;
        }
        
        #submenu_items.fade-out {
            opacity: 0 !important;
        }
        
        #submenu_items.fade-in {
            opacity: 1 !important;
        }
    </style>
    
    <header class="site-header" id="header">
        <ul id="header_image_slider">
            <li style="background-image: url({% static 'madmusic/images/Danza_Goya.jpg' %})"></li>
            <li style="background-image: url({% static 'madmusic/images/02-CUBIERTAS-CAT√ÅLOGO-ICCMU-20-X-210-TRAZADA_P√°gina_1-e1627641751618.png' %})"></li>
        </ul>
        <div class="overlay_container">
            <div class="overlay" style="background-color: #0a0000"></div>
        </div>
        <ul id="header_text_slider">
            <li>
                <a href="/madmusic/" style="text-decoration: none;">
                    <div class="container">
                        <h1 class="title">MadMusic-CM H2019/HUM-5731</h1>
                        <h6 class="subtitle">Espacios, g√©neros y p√∫blicos de la m√∫sica en Madrid (ss. XVII-XX)</h6>
                    </div>
                </a>
            </li>
            <li>
                <a href="#" style="text-decoration: none;">
                    <div class="container">
                        <h1 class="title">De la corte real a los bailes clandestinos</h1>
                        <h6 class="subtitle"></h6>
                    </div>
                </a>
            </li>
        </ul>
        <div class="container principal_container">
            <h2 class="logo logo_iccmu">
                <a href="https://iccmu.es/" rel="home">
                    Instituto Complutense de Ciencias Musicales
                </a>
            </h2>
            <p class="inicio-btn">
                <a href="/madmusic/">Volver al inicio</a>
            </p>
            <div class="logo logo_title">
                <div class="text_container">
                    <h1>
                        Instituto Complutense
                        <br/>
                        de Ciencias Musicales
                    </h1>
                </div>
            </div>
            <div class="tools_bar_container">
                <ul class="tools_bar">
                    <li id="tool_user">
                        <form action="/madmusic/" id="search-frm" method="get">
                            <input id="search-fld" name="s" placeholder="Buscar en la web" type="search"/>
                            <input id="search-btn" type="submit" value=""/>
                            <i aria-hidden="true" class="fa fa-search"></i>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="menu_mobile">
            <div class="container">
                <a class="mobile_user" href="/madmusic/">
                    <i class="fa fa-user"></i>
                </a>
                <a class="search_trigger" href="#">
                    <i class="fa fa-search"></i>
                </a>
                <form action="/madmusic/" method="get">
                    <input id="search" name="s" placeholder="Buscar en la web" type="text" value="">
                    <input class="search-submit" type="submit" value="Buscar en la web">
                </form>
                <a class="menu_trigger" href="#">
                    <div class="icon">
                        <span></span>
                    </div>
                    <span class="close_text">MEN√ö</span>
                    <span class="open_text">CERRAR</span>
                </a>
            </div>
        </div>
        
        <!-- Wrapper para Men√∫ + Submen√∫ -->
        <div class="menu-section-wrapper">
            <!-- Men√∫ Principal (Nivel 1 - Barra Blanca con Dropdown en Hover) -->
            <div class="menu-principal-container" id="menu_principal_container" style="pointer-events: auto; position: relative; z-index: 50;">
                <div class="container">
                    <ul class="menu" id="menu_principal" style="pointer-events: auto;">
                        {% if wagtail_primary_menu %}
                            {% for item in wagtail_primary_menu %}
                            <li class="menu-item {% if item.children %}menu-item-has-children{% endif %} {% if item.is_current or item.is_ancestor %}active{% endif %}" 
                                data-has-children="{{ item.children|length|default:0 }}">
                                <a href="{{ item.url }}">{{ item.title }}</a>
                                {% if item.children %}
                                <ul class="sub-menu" style="display: none;">
                                    {% for child in item.children %}
                                    <li class="menu-item {% if child.is_current %}active{% endif %}" 
                                        data-title="{{ child.title }}" 
                                        data-url="{{ child.url }}">
                                        <a href="{{ child.url }}">{{ child.title }}</a>
                                    </li>
                                    {% endfor %}
                                </ul>
                                {% endif %}
                            </li>
                            {% endfor %}
                        {% else %}
                            <li class="menu-item"><a href="/madmusic/">INICIO</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            
            <!-- Submen√∫ (Nivel 2 - Barra Roja) -->
            <div class="submenu_menu_principal {% if wagtail_secondary_menu %}page-active{% endif %}" 
                 id="submenu_container">
                <div class="container">
                    <ul class="menu" id="submenu_items" style="pointer-events: auto; display: flex; flex-wrap: wrap; gap: 25px; margin: 0; padding: 0; list-style: none;">
                        {% if wagtail_secondary_menu %}
                            {% for item in wagtail_secondary_menu %}
                            <li class="menu-item {% if item.is_current %}active{% endif %}" style="margin: 0;" data-original="true">
                                <a href="{{ item.url }}" style="color: #ffffff; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 13px; letter-spacing: 0.5px;">
                                    {{ item.title }}
                                </a>
                            </li>
                            {% endfor %}
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
    </header>
    
    <main class="site-main" id="main" role="main">
        {% block content %}{% endblock %}
    </main>
    
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <!-- Redes sociales -->
                <div class="footer-social">
                    <a href="#" class="social-link" aria-label="Twitter">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a href="#" class="social-link" aria-label="LinkedIn">
                        <i class="fa fa-linkedin"></i>
                    </a>
                </div>
                
                <!-- Men√∫ del footer -->
                <nav class="footer-menu">
                    <div class="footer-column">
                        <h4>Acerca de MadMusic</h4>
                        <ul>
                            <li><a href="/madmusic/proyecto-madmusic/">Acerca de MadMusic</a></li>
                            <li><a href="/madmusic/proyecto-madmusic/objetivos/">Objetivos</a></li>
                            <li><a href="/madmusic/proyecto-madmusic/investigacion/">L√≠neas de investigaci√≥n</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Equipo</h4>
                        <ul>
                            <li><a href="/madmusic/equipo/">Equipo</a></li>
                            <li><a href="/madmusic/equipo/alvaro-torrente' %}">√Ålvaro Torrente ‚Äì Coordinador</a></li>
                            <li><a href="/madmusic/equipo/grupos-beneficiarios' %}">Grupos Beneficiarios</a></li>
                            <li><a href="/madmusic/equipo/grupos-asociados' %}">Grupos Asociados</a></li>
                            <li><a href="/madmusic/equipo/participantes' %}">Participantes MadMusic 1</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Resultados cient√≠ficos</h4>
                        <ul>
                            <li><a href="/madmusic/divulgacion-cientifica/">Resultados cient√≠ficos</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/archivos/">Fondos documentales</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/cuadernos-de-musica-iberoamericana/">Cuadernos de M√∫sica Iberoamericana</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/articulos-en-revistas-cientificas/">Publicaciones</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/publicaciones-en-abierto/">Publicaciones en abierto</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/congresos-madmusic/">Congresos | Seminarios</a></li>
                            <li><a href="/madmusic/divulgacion-cientifica/publicaciones-madmusic-2/">Destacados MadMusic 1</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Servicios e Infraestructura</h4>
                        <ul>
                            <li><a href="/madmusic/servicios-e-infraestructura/">Servicios e Infraestructura</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Entidades y Transferencia</h4>
                        <ul>
                            <li><a href="/madmusic/transferencia/">Entidades y Transferencia</a></li>
                            <li><a href="/madmusic/transferencia/empresas/">Entidades colaboradoras</a></li>
                            <li><a href="/madmusic/transferencia/conferencias/">Conferencias</a></li>
                            <li><a href="/madmusic/transferencia/conciertos/">Conciertos | Grabaciones</a></li>
                            <li><a href="/madmusic/transferencia/exposiciones/">Exposiciones | Eventos</a></li>
                            <li><a href="/madmusic/transferencia/divulgacion/">Divulgaci√≥n</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Formaci√≥n | Empleo</h4>
                        <ul>
                            <li><a href="/madmusic/formacion-empleo/">Formaci√≥n | Empleo</a></li>
                            <li><a href="/madmusic/formacion-empleo/formacion/">Tesis doctorales y TFMs</a></li>
                            <li><a href="/madmusic/cursos-de-verano/">Cursos de verano</a></li>
                            <li><a href="/madmusic/formacion-empleo/empleo/">Empleo</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Noticias</h4>
                        <ul>
                            <li><a href="/madmusic/noticias/">Noticias</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Contacto</h4>
                        <ul>
                            <li><a href="/madmusic/contacto/">Contacto</a></li>
                        </ul>
                    </div>
                </nav>
                
                <!-- Informaci√≥n del footer -->
                <div class="footer-info">
                    <p>&copy; {% now "Y" %} Instituto Complutense de Ciencias Musicales. Todos los derechos reservados.</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Subfooter con logos e informaci√≥n -->
    <div id="subfooter">
        <div class="container">
            <div class="row">
                <div class="col-md-12 footer_logos_container">
                    <h6 class="logo logo_iccmu">
                        <a href="/madmusic/" rel="home">
                            Instituto Complutense de Ciencias Musicales
                        </a>
                    </h6>
                    <div class="logo logo_title">
                        <div class="text_container">
                            <h1>
                                Instituto Complutense<br/>
                                de Ciencias Musicales
                            </h1>
                        </div>
                    </div>
                    <div class="logos_patronos">
                        <h6 class="logo logo_ucm_large">
                            <a href="https://www.ucm.es/" rel="home" target="_blank">
                                Universidad Complutense de Madrid
                            </a>
                        </h6>
                        <h6 class="logo logo_gobiernoespana">
                            <a href="https://www.cultura.gob.es/cultura-mecd/areas-cultura/artesescenicas.html" rel="home" target="_blank">
                                Instituto Nacional de las Artes Esc√©nicas y de la M√∫sica
                            </a>
                        </h6>
                        <h6 class="logo logo_cmadrid">
                            <a href="https://www.comunidad.madrid/" rel="home" target="_blank">
                                Consejer√≠a de Educaci√≥n de la Comunidad de Madrid
                            </a>
                        </h6>
                    </div>
                    <br class="clear"/>
                    <p class="copyright">
                        INSTITUTO COMPLUTENSE DE CIENCIAS MUSICALES<br/>
                        Facultad de Geograf√≠a e Historia de la UCM<br/>
                        Edificio de Filosof√≠a B<br/>
                        Calle Profesor Aranguren, s/n<br/>
                        Madrid, 28040<br/>
                        Espa√±a<br/>
                        Tel√©fonos: +34 913 945 936 / +34 913 945 937
                    </p>
                    <div class="footer-legal">
                        <a href="#">Aviso legal</a> | <a href="#">Pol√≠tica de Privacidad</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="{% static 'madmusic/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'madmusic/js/main.js' %}"></script>
    <script src="{% static 'madmusic/js/accordions.js' %}"></script>
    {% block extra_js %}{% endblock %}
    
    <style>
        /* Estilos para el footer normal */
        .site-footer {
            background-color: #333;
            color: #fff;
            padding: 40px 0 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .footer-social {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #555;
            margin-bottom: 30px;
        }
        
        .social-link {
            display: inline-block;
            color: #fff;
            font-size: 24px;
            margin: 0 15px;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .social-link:hover {
            color: #d11922;
        }
        
        .footer-menu {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .footer-column {
            flex: 1;
            min-width: 200px;
            margin-bottom: 30px;
            padding: 0 15px;
        }
        
        .footer-column h4 {
            color: #fff;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .footer-column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .footer-column ul li {
            margin-bottom: 8px;
        }
        
        .footer-column ul li a {
            color: #ccc;
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s ease;
        }
        
        .footer-column ul li a:hover {
            color: #d11922;
        }
        
        .footer-info {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #555;
            color: #999;
            font-size: 12px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .footer-menu {
                flex-direction: column;
            }
            
            .footer-column {
                min-width: 100%;
            }
        }
        
        /* Estilos para el subfooter con logos */
        #subfooter {
            padding: 40px 0;
            background-color: #fff;
            border-top: 1px solid #e0e0e0;
        }
        
        .footer_logos_container {
            text-align: center;
        }
        
        .footer_logos_container .logo {
            display: inline-block;
            vertical-align: middle;
            margin: 0 20px 20px;
            text-indent: -9999px;
            overflow: hidden;
            background-position: center;
            background-size: contain;
            background-repeat: no-repeat;
        }
        
        .footer_logos_container .logo a {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .logo_iccmu {
            width: 70px;
            height: 70px;
            background-color: #000;
            background-image: url('/static/madmusic/img/logo_iccmu.png');
        }
        
        .logo_title {
            background: none;
            width: auto;
            text-indent: 0;
            height: auto;
            margin-left: 20px;
            vertical-align: middle;
        }
        
        .logo_title h1 {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin: 0;
            line-height: 1.3;
            text-align: left;
        }
        
        .logos_patronos {
            float: right;
            text-align: right;
        }
        
        .logo_ucm_large {
            width: 210px;
            height: 70px;
            background-size: auto;
            background-position: bottom;
            background-image: url('/static/madmusic/img/logo_ucm_large.png');
        }
        
        .logo_gobiernoespana {
            width: 340px;
            height: 70px;
            background-size: auto;
            background-position: bottom;
            background-image: url('/static/madmusic/img/logo_gobiernodeespana.png');
        }
        
        .logo_cmadrid {
            width: 120px;
            height: 50px;
            background-size: contain;
            margin-top: 20px;
            background-image: url('/static/madmusic/img/logo_cmadrid.png');
        }
        
        .footer_logos_container .copyright {
            clear: both;
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #666;
            line-height: 1.8;
        }
        
        .footer-legal {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .footer-legal a {
            color: #666;
            text-decoration: none;
            font-size: 12px;
            margin: 0 10px;
        }
        
        .footer-legal a:hover {
            color: #d11922;
        }
        
        .clear {
            clear: both;
        }
        
        /* Responsive para logos */
        @media (max-width: 991px) {
            .logos_patronos {
                float: none;
                text-align: center;
                margin-top: 20px;
            }
            
            .logo_title {
                margin-left: 0;
                margin-top: 20px;
                text-align: center;
            }
            
            .logo_title h1 {
                text-align: center;
            }
            
            .footer_logos_container .logo {
                margin: 10px;
            }
        }
    </style>
    
    <script>
        // Men√∫ hover b√°sico
        $(document).ready(function() {
            $('.menu-item-has-children').hover(
                function() {
                    $(this).find('.sub-menu').stop(true, true).fadeIn(200);
                },
                function() {
                    $(this).find('.sub-menu').stop(true, true).fadeOut(200);
                }
            );
        });
    </script>
    
    <style>
        /* Asegurar que los enlaces del men√∫ sean clickeables */
        #menu_principal a,
        #footer_menu a {
            pointer-events: auto !important;
            cursor: pointer !important;
            position: relative;
            z-index: 100;
        }
        
        #menu_principal_container {
            pointer-events: auto !important;
            z-index: 50 !important;
        }
    </style>
    
    <!-- JavaScript para hover del men√∫ -->
    <script>
    (function() {
        console.log('üîß Iniciando script de men√∫ hover...');
        
        // Esperar a que el DOM est√© listo
        function initMenuHover() {
            const submenuContainer = document.getElementById('submenu_container');
            const submenuItems = document.getElementById('submenu_items');
            const menuPrincipal = document.getElementById('menu_principal');
            const menuWrapper = document.querySelector('.menu-section-wrapper');
            
            console.log('üìã Elementos encontrados:', {
                submenuContainer: !!submenuContainer,
                submenuItems: !!submenuItems,
                menuPrincipal: !!menuPrincipal,
                menuWrapper: !!menuWrapper
            });
            
            if (!submenuContainer || !submenuItems || !menuPrincipal) {
                console.error('‚ùå No se encontraron los elementos necesarios');
                return;
            }
            
            // Forzar que el men√∫ funcione igual en todas las p√°ginas (solo hover)
            submenuContainer.classList.remove('page-active');
            
            let hoverTimeout = null;
            let isOverSubmenu = false;
            let isOverMenuPrincipal = false;
            let currentActiveItem = null;
            
            console.log('üíæ Men√∫ inicializado (modo hover en todas las p√°ginas)');
            
            // Funci√≥n para mostrar submen√∫
            function showSubmenu(childItems, menuItem) {
                console.log('üëÜ Intentando mostrar submen√∫ con', childItems.length, 'items');
                
                if (childItems.length === 0) {
                    return;
                }
                
                // Si ya es el item activo, no hacer nada
                if (currentActiveItem === menuItem) {
                    console.log('‚è∏Ô∏è Ya es el item activo, no cambiar');
                    return;
                }
                
                // Cancelar timeout si existe
                if (hoverTimeout) {
                    clearTimeout(hoverTimeout);
                    hoverTimeout = null;
                }
                
                // Construir HTML
                let html = '';
                childItems.forEach(function(child) {
                    const title = child.getAttribute('data-title');
                    const url = child.getAttribute('data-url');
                    html += '<li class="menu-item" style="margin: 0;">' +
                            '<a href="' + url + '" style="color: #ffffff; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 12px; letter-spacing: 0.5px;">' +
                            title + '</a></li>';
                });
                
                // Si ya hay contenido visible, hacer fade-out antes de cambiar
                if (currentActiveItem && submenuContainer.classList.contains('hover-active')) {
                    submenuItems.classList.add('fade-out');
                    
                    setTimeout(function() {
                        // Actualizar contenido
                        submenuItems.innerHTML = html;
                        submenuItems.classList.remove('fade-out');
                        submenuItems.classList.add('fade-in');
                        
                        // Guardar el nuevo item activo
                        currentActiveItem = menuItem;
                        
                        // Remover fade-in despu√©s de la animaci√≥n
                        setTimeout(function() {
                            submenuItems.classList.remove('fade-in');
                        }, 200);
                    }, 200);
                } else {
                    // Primera vez o no hay contenido previo, mostrar directamente
                    submenuItems.innerHTML = html;
                    currentActiveItem = menuItem;
                    submenuContainer.classList.add('hover-active');
                }
                
                // Asegurar que hover-active est√© presente
                submenuContainer.classList.add('hover-active');
                console.log('‚úÖ Submen√∫ mostrado');
            }
            
            // Funci√≥n para ocultar submen√∫
            function hideSubmenu(immediate) {
                console.log('ü§î Intentando ocultar submen√∫...', immediate ? '(inmediato)' : '(con delay)');
                
                // Cancelar timeout previo
                if (hoverTimeout) {
                    clearTimeout(hoverTimeout);
                    hoverTimeout = null;
                }
                
                const delay = immediate ? 0 : 250;
                
                hoverTimeout = setTimeout(function() {
                    // Solo ocultar si NO estamos sobre el men√∫ principal NI sobre el submen√∫
                    if (!isOverMenuPrincipal && !isOverSubmenu) {
                        console.log('üëã Ocultando submen√∫');
                        submenuContainer.classList.remove('hover-active');
                        currentActiveItem = null;
                    } else {
                        console.log('‚è∏Ô∏è A√∫n sobre men√∫ o submen√∫, no ocultar');
                    }
                }, delay);
            }
            
            // Agregar eventos a cada item del men√∫ principal
            const menuItems = menuPrincipal.querySelectorAll(':scope > .menu-item');
            console.log('üîç Items del men√∫ principal encontrados:', menuItems.length);
            
            menuItems.forEach(function(menuItem, idx) {
                const hasChildren = menuItem.getAttribute('data-has-children');
                
                menuItem.addEventListener('mouseenter', function(e) {
                    // Cancelar timeout pendiente
                    if (hoverTimeout) {
                        clearTimeout(hoverTimeout);
                        hoverTimeout = null;
                    }
                    
                    if (hasChildren && parseInt(hasChildren) > 0) {
                        console.log('üñ±Ô∏è Mouse enter en item con hijos', idx);
                        const subMenu = this.querySelector('.sub-menu');
                        if (subMenu) {
                            const childItems = subMenu.querySelectorAll('li[data-title]');
                            if (!isOverSubmenu || currentActiveItem !== menuItem) {
                                showSubmenu(childItems, menuItem);
                            }
                        }
                    } else {
                        console.log('üñ±Ô∏è Mouse enter en item SIN hijos', idx);
                        // Item sin hijos: ocultar inmediatamente
                        submenuContainer.classList.remove('hover-active');
                        currentActiveItem = null;
                        console.log('üëã Submen√∫ ocultado');
                    }
                });
            });
            
            // Eventos en el men√∫ principal (√°rea completa)
            menuPrincipal.addEventListener('mouseenter', function() {
                console.log('üìç Mouse ENTER en men√∫ principal');
                isOverMenuPrincipal = true;
                if (hoverTimeout) {
                    clearTimeout(hoverTimeout);
                    hoverTimeout = null;
                }
            });
            
            menuPrincipal.addEventListener('mouseleave', function(e) {
                console.log('üìç Mouse LEAVE de men√∫ principal');
                isOverMenuPrincipal = false;
                
                // Siempre dar tiempo para que el mouse llegue al submen√∫
                hideSubmenu(false);
            });
            
            // Eventos en la barra roja (submen√∫)
            submenuContainer.addEventListener('mouseenter', function() {
                console.log('üìç Mouse ENTER en barra roja');
                isOverSubmenu = true;
                if (hoverTimeout) {
                    clearTimeout(hoverTimeout);
                    hoverTimeout = null;
                }
            });
            
            submenuContainer.addEventListener('mouseleave', function(e) {
                console.log('üìç Mouse LEAVE de barra roja');
                isOverSubmenu = false;
                
                // Dar tiempo para que el mouse pueda volver al men√∫ o ir a otro lugar
                hideSubmenu(false);
            });
            
            console.log('‚úÖ Script de men√∫ hover inicializado correctamente');
        }
        
        // Inicializar cuando el DOM est√© listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMenuHover);
        } else {
            initMenuHover();
        }
    })();
    </script>
</body>
</html>





